<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="css/style.css" rel="stylesheet" type="text/css" media="all">
  <title>counter</title>
</head>
<body style="background-color: #FAFAFA;">
<div id="counter">
  <!-- 最初は空、plusbtn押下で追加される-->
  <div id="counterarea"></div>
  <div id="plusbtn" title="カウンターを1つ追加">+</div>
  <a href="#" title="トップへ"><div id="pageupbtn">↑</div></a>
</div>
  <script>
    const twoDigit = (n)=> (n < 10 ? "0" + n : String(n));

    function addCounter(initialValue = 0){
      const host = document.createElement('div');
      host.className = 'counter';

      host.innerHTML = `
        <input type="text" class="counter-name" placeholder="NAME">
        <div class="countnum">00</div>
        <div class="btnarea">
          <input type="button" value="+10" data-op="plus10">
          <input type="button" value="RESET" data-op="reset">
          <input type="button" value="+1" data-op="plus1">
        </div>
      `;

      const display = host.querySelector('.countnum');
      let value = initialValue;
      const render = () => display.textContent = twoDigit(value);
      render();

      host.addEventListener('click', (e)=>{
        if (!(e.target instanceof HTMLInputElement)) return;
        const op = e.target.dataset.op;
        if (op === 'plus1') value += 1;
        else if (op === 'plus10') value += 10;
        else if (op === 'reset') value = 0;
        render();
      });

      document.getElementById('counterarea').appendChild(host);
      return host;
    }

    document.getElementById('plusbtn').addEventListener('click', ()=> addCounter(0));

    // 初期表示で1つカウンターを作成する
    window.addEventListener('load', ()=> addCounter(0));
  </script>
</body>
</html>
